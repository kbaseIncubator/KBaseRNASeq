{
    "ver": "0.0.1",
    "authors": [],
    "contact": "help@kbase.us",
    "visible": true,
    "categories": [
        "active",
        "expression",
        "sequence"
    ],
    "widgets": {
        "input": null,
        "output": "kbaseExpressionSampleTableNew"
    },
    "parameters": [
        {
            "id": "sampleset_id",
            "optional": false,
            "advanced": false,
            "allow_multiple": true,
            "default_values": [
                ""
            ],
            "field_type": "text",
            "text_options": {
                "valid_ws_types": [
		    "KBaseRNASeq.RNASeqSampleSet",
                    "KBaseSets.ReadsSet",
                    "KBaseFile.SingleEndLibrary",
                    "KBaseFile.PairedEndLibrary"
                ]
            }
        },
        {
            "id": "genome_id",
            "optional": false,
            "advanced": false,
            "allow_multiple": false,
            "default_values": [
                ""
            ],
            "field_type": "text",
            "text_options": {
                "valid_ws_types": [
                    "KBaseGenomes.Genome"
                ]
            }
        },
	{
	    "id" : "output_expression_matrix_name",
	    "optional" : true,
	    "advanced" : false,
	    "allow_multiple" : false,
	    "default_values" : [ "" ],
	    "field_type" : "text",
	    "text_options" : {
		"valid_ws_types" : [ "KBaseFeatureValues.ExpressionMatrix" ],
		"is_output_name":true
	    } 
	},
	{
	    "id" : "output_alignment_set_name",
	    "optional" : false,
	    "advanced" : false,
	    "allow_multiple" : false,
	    "default_values" : [ "" ],
	    "field_type" : "text",
	    "text_options" : {
		"valid_ws_types" : [ "KBaseRNASeq.RNASeqAlignmentSet" ],
		"is_output_name":true
	    } 
	},
        {
            "id": "run_stringtie",
            "optional": false,
            "advanced": false,
            "allow_multiple": false,
            "default_values": [
                "1"
            ],
            "field_type": "checkbox",
            "checkbox_options": {
                "checked_value": 1,
                "unchecked_value": 0
            }
        },
        {
            "id": "hi_tailor_alignments",
            "optional": false,
            "advanced": false,
            "allow_multiple": false,
            "default_values": [
                "dta-cufflinks"
            ],
            "field_type": "dropdown",
            "dropdown_options": {
                "options": [
                    {
                        "value": "dta-cufflinks",
                        "display": "dta-cufflinks",
                        "id": "dta-cufflinks",
                        "ui_name": "dta-cufflinks"
                    },
                    {
                        "value": "dta",
                        "display": "dta",
                        "id": "dta",
                        "ui_name": "dta"
                    }
                ]
            }
        },
        {
            "id": "hi_quality_score",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "phred33"
            ],
            "field_type": "dropdown",
            "dropdown_options": {
                "options": [
                    {
                        "value": "phred33",
                        "display": "phred33",
                        "id": "phred33",
                        "ui_name": "phred33"
                    },
                    {
                        "value": "phred64",
                        "display": "phred64",
                        "id": "phred64",
                        "ui_name": "phred64"
                    }
                ]
            }
        },
        {
            "id": "hi_min_intron_length",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "20"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_max_intron_length",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "500000"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_no_spliced_alignment",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                ""
            ],
            "field_type": "checkbox",
            "checkbox_options": {
                "checked_value": 1,
                "unchecked_value": 0
            }
        },
        {
            "id": "hi_skip",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_trim5",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_trim3",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_np",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "1"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_minins",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_maxins",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "500"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "hi_orientation",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "fr"
            ],
            "field_type": "dropdown",
            "dropdown_options": {
                "options": [
                    {
                        "value": "fr",
                        "display": "fr",
                        "id": "fr",
                        "ui_name": "fr"
                    },
                    {
                        "value": "rf",
                        "display": "rf",
                        "id": "rf",
                        "ui_name": "rf"
                    },
                    {
                        "value": "ff",
                        "display": "ff",
                        "id": "ff",
                        "ui_name": "ff"
                    }
                ]
            }
        },
        {
            "id": "hi_transcriptome_mapping_only",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                ""
            ],
            "field_type": "checkbox",
            "checkbox_options": {
                "checked_value": 1,
                "unchecked_value": 0
            }
        },
        {
            "id": "st_label",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "STRG"
            ],
            "field_type": "text"
        },
        {
            "id": "st_min_isoform_abundance",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0.1"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "float"
            }
        },
        {
            "id": "st_min_length",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "200"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "st_a_juncs",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "10"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "st_j_min_reads",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "1"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "float"
            }
        },
        {
            "id": "st_c_min_read_coverage",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "2.5"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "float"
            }
        },
        {
            "id": "st_gap_sep_value",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "50"
            ],
            "field_type": "text",
            "text_options": {
                "validate_as": "int"
            }
        },
        {
            "id": "st_disable_trimming",
            "optional": true,
            "advanced": true,
            "allow_multiple": false,
            "default_values": [
                "0"
            ],
            "field_type": "checkbox",
            "checkbox_options": {
                "checked_value": 1,
                "unchecked_value": 0
            }
        }
    ],
    "parameter-groups": [
        {
            "id": "hi_options",
            "parameters": [
                "hi_quality_score",
                "hi_min_intron_length",
                "hi_max_intron_length",
                "hi_no_spliced_alignment",
                "hi_skip",
                "hi_trim5",
                "hi_trim3",
                "hi_np",
                "hi_minins",
                "hi_maxins",
                "hi_orientation",
                "hi_transcriptome_mapping_only",
                "hi_tailor_alignments"
            ],
            "optional": false,
            "advanced": true,
            "allow_multiple": false,
            "with_border": true
        },
        {
            "id": "st_options",
            "parameters": [
                "st_label",
                "st_min_isoform_abundance",
                "st_a_juncs",
                "st_min_length",
                "st_j_min_reads",
                "st_c_min_read_coverage",
                "st_gap_sep_value",
                "st_disable_trimming"
            ],
            "optional": true,
            "allow_multiple": false,
            "advanced": true,
            "with_border": true
        }
    ],
    "behavior": {
        "service-mapping": {
            "url": "",
	    "name" : "KBaseRNASeq",
	    "method" : "Hisat2StringTieCall",
            "input_mapping": [
                {
                    "narrative_system_variable": "workspace",
                    "target_property": "ws_id"
                },
                {
                    "input_parameter": "sampleset_id",
                    "target_property": "sampleset_id"
                },
                {
                    "input_parameter": "genome_id",
                    "target_property": "genome_id"
                },
                {
                    "input_parameter": "hi_options",
                    "target_property": "hi_options"
                },
                {
                    "input_parameter": "run_stringtie",
                    "target_property": "run_stringtie"
                },
                {
                    "input_parameter": "st_options",
                    "target_property": "st_options"
                },
                {
                    "input_parameter": "output_alignment_set_name",
                    "target_property": "output_alignment_set_name"
		},
                {
                    "input_parameter": "output_expression_matrix_name",
                    "target_property": "output_expression_matrix_name"
                }
            ],
            "output_mapping": [
                {
                    "service_method_output_path": [0, "output"],
                    "target_property": "output"
                },
                {
                    "service_method_output_path": [0, "workapace"],
                    "target_property": "workspace"
                },
                {
                    "service_method_output_path": [0, "report_name"],
                    "target_property": "report_name"
                },
                {
                    "service_method_output_path": [0, "report_ref"],
                    "target_property": "report_ref"
                }
            ]
        }
    },
    "job_id_output_field": "docker"
}
